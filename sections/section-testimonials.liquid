{{ 'section-testimonials.css' | asset_url | stylesheet_tag }}

{% assign numb_quotes = section.blocks.size %}

{% assign t_image_render_size = section.settings.image_size | times: 2 %}

{% style %}
.section-{{ section.id }} .section-inner {
  padding-top: {{ section.settings.top_padding | times: 0.8 }}px;
  padding-bottom: {{ section.settings.bottom_padding | times: 0.8 }}px;
}
.section-{{ section.id }} .testimonial-image {
  width: {{ section.settings.image_size }}px;
}
.testimonials-layout-grid {
  display: grid;
  grid-template-columns: repeat(1,1fr);
  grid-template-rows: repeat(1,1fr);
}
@media only screen and (min-width: 750px) {
  .section-{{ section.id }} .section-inner {
    padding-top: {{ section.settings.top_padding }}px;
    padding-bottom: {{ section.settings.bottom_padding }}px;
  }
  .testimonials-layout-grid {
   grid-template-columns: repeat({{ numb_quotes }},1fr);
 } 
}
{% endstyle %}

<div class="section-container testimonial-section section-{{ section.id }} color-scheme-{{ section.settings.text_color }} color-scheme-{{ section.settings.bg_color }}">

{% if section.settings.top_border %}
<hr class="section-border section-border-color-{{ section.settings.border_color }} section-border-width-{{ section.settings.border_width }}">
{% endif %}  
  
<div class="section-inner page-width align-{{ section.settings.content_alignment }}">

{% unless section.settings.section_label == blank and section.settings.heading == blank and section.settings.subheading == blank %}
<div class="section-header section-header-std-padding">
{% unless section.settings.section_label == blank %}<div class="section-label">{{ section.settings.section_label }}</div>{% endunless %}
{% unless section.settings.heading == blank %}<h2 class="{{ section.settings.heading_size }}">{{ section.settings.heading }}</h2>{% endunless %}
{% unless section.settings.subheading == blank %}<div class="section-header-paragraph">{{ section.settings.subheading }}</div>{% endunless %}
</div>
{% endunless %}

<div class="testimonials-container testimonials-layout-grid">
{% for block in section.blocks %}
<div class="testimonial" {{ block.shopify_attributes }}>
{% if section.settings.show_ratings %}
<div class="testimonial-star-rating">
{% if block.settings.star_rating == 1 %}
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
{% endif %}
{% if block.settings.star_rating == 2 %}
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
{% endif %}
{% if block.settings.star_rating == 3 %}
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
{% endif %}
{% if block.settings.star_rating == 4 %}
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
{% endif %}
{% if block.settings.star_rating == 5 %}
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
<span class="testimonial-star">{% render 'icon-star-filled' %}</span>
{% endif %}
</div>
{% endif %}  
  <span class="testimonial-quote-text text-{{ section.settings.quote_font_size }}">“{{ block.settings.quote }}”</span>
  {% if block.settings.image and section.settings.show_logos %}
    <div class="testimonial-image">
    {{ block.settings.image | image_url: width: t_image_render_size | image_tag: loading: 'lazy' }}
    </div>
  {% endif %}
  {% if block.settings.caption != empty and section.settings.show_captions %}
  <span class="testimonial-caption text-small">{{ block.settings.caption }}</span>
  {% endif %}
</div>
{% endfor %}
</div>

{% if section.settings.btn_enable %}
<div class="section-footer {% if section.settings.content_width == 'standard' %}page-width{% else %}page-width-narrow{% endif %} button-color-scheme--{{ section.settings.btn_color_scheme }}">
    {% if section.settings.btn_style == 'solid' %}
	<a href="{{ section.settings.btn_url }}" role="link" class="button button--solid">{{ section.settings.btn_txt }}</a>
    {% endif %}
    {% if section.settings.btn_style == 'outline' %}
	<a href="{{ section.settings.btn_url }}" role="link" class="button button--outline">{{ section.settings.btn_txt }}</a>
    {% endif %}
    {% if section.settings.btn_style == 'link' %}
	<a href="{{ section.settings.btn_url }}" role="link" class="link--underlined">{{ section.settings.btn_txt }}</a>
    {% endif %}
</div>
{% endif %}
  
</div>

{% if section.settings.bottom_border %}
<hr class="section-border section-border-color-{{ section.settings.border_color }} section-border-width-{{ section.settings.border_width }}">
{% endif %}
  
</div>

{% schema %}
  {
    "name": "t:sections.testimonials.name",
    "max_blocks": 4,
    "disabled_on": {
      "groups": ["header", "footer"],
      "templates": ["cart"]
    },
    "settings": [
    {
      "type": "text",
      "id": "section_label",
      "label": "t:sections.all.caption"
	},
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.all.heading"
	},
    {
      "type": "richtext",
      "id": "subheading",
      "label": "t:sections.all.sub_heading"
	},
    {
      "type": "select",
      "id": "heading_size",
      "label": "t:sections.all.heading_size.label",
      "options": [
        {
          "value": "h3",
          "label": "t:sections.all.heading_size.small.label"
        },
        {
          "value": "h2",
          "label": "t:sections.all.heading_size.normal.label"
        },
        {
          "value": "h1",
          "label": "t:sections.all.heading_size.large.label"
        },
        {
          "value": "h0",
          "label": "t:sections.all.heading_size.xl.label"
        }
        ],
      "default": "h2"
    },
    {
      "type": "text_alignment",
      "id": "content_alignment",
      "label": "t:sections.all.alignment.alignment_header",
      "default": "center"
    },
    {
      "type": "checkbox",
      "id": "show_ratings",
      "label": "t:sections.testimonials.settings.show_ratings.label",
      "default": true
	},
    {
      "type": "checkbox",
      "id": "show_captions",
      "label": "t:sections.testimonials.settings.show_captions.label",
      "default": true
	},
    {
      "type": "checkbox",
      "id": "show_logos",
      "label": "t:sections.testimonials.settings.show_images.label",
      "default": false
    },
    {
      "type": "range",
      "id": "image_size",
      "min": 40,
      "max": 140,
      "step": 10,
      "unit": "px",
      "default": 80,
      "label": "t:sections.testimonials.settings.image_size.label"
    },
    {
      "type": "select",
      "id": "quote_font_size",
      "label": "t:sections.testimonials.settings.font_size.label",
      "options": [
        {
          "value": "normal",
          "label": "t:sections.all.size.normal"
        },
        {
          "value": "large",
          "label": "t:sections.all.size.large"
        },
        {
          "value": "xl",
          "label": "t:sections.all.size.xl"
        }
        ],
      "default": "normal"
    },
    {
	"type": "checkbox",
	"id": "btn_enable",
	"default": false,
    "label": "t:sections.all.buttons.show_button"
	},
    {
	"type": "text",
	"id": "btn_txt",
	"label": "t:sections.all.buttons.button_label"
	},
    {
	"type": "url",
	"id": "btn_url",
	"label": "t:sections.all.buttons.button_link"
	},
    {
      "type": "select",
      "id": "btn_style",
      "label": "t:sections.all.buttons.button_style",
      "options": [
        {
          "value": "solid",
          "label": "t:sections.all.buttons.button_style_solid"
        },
        {
          "value": "outline",
          "label": "t:sections.all.buttons.button_style_outline"
        },
        {
          "value": "link",
          "label": "t:sections.all.buttons.button_style_link"
        }
		],
      "default": "solid"
    },
    {
        "type": "select",
        "id": "btn_color_scheme",
        "label": "t:sections.all.buttons.button_color_scheme",
        "options": [
        {
        "value": "default",
        "label": "t:sections.all.default"
        },
        {
        "value": "match-section",
        "label": "t:sections.all.buttons.button_color_scheme_match"
        }
        ],
      "default": "default"
    },
    {
      "type": "header",
      "content": "t:sections.all.colors.label"
    },
    {
      "type": "select",
      "id": "text_color",
      "options": [
        {
          "value": "fg-body",
          "label": "t:sections.all.colors.background_body.label"
        },
        {
          "value": "fg-01",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "fg-02",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "fg-03",
          "label": "t:sections.all.colors.accent_3.label"
        },
        {
          "value": "fg-04",
          "label": "t:sections.all.colors.accent_4.label"
        }
      ],
      "default": "fg-body",
      "label": "t:sections.all.colors.text_color.label"
    },
    {
      "type": "select",
      "id": "bg_color",
      "options": [
        {
          "value": "bg-body",
          "label": "t:sections.all.colors.background_body.label"
        },
        {
          "value": "bg-01",
          "label": "t:sections.all.colors.background_1.label"
        },
        {
          "value": "bg-02",
          "label": "t:sections.all.colors.background_2.label"
        },
        {
          "value": "bg-03",
          "label": "t:sections.all.colors.background_3.label"
        },
        {
          "value": "bg-04",
          "label": "t:sections.all.colors.background_4.label"
        }
      ],
      "default": "bg-body",
      "label": "t:sections.all.colors.background_color.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
    "type": "range",
    "id": "top_padding",
    "min": 0,
    "max": 160,
    "step": 10,
    "unit": "px",
    "default": 80,
    "label": "t:sections.all.padding.padding_top"
    },
    {
    "type": "range",
    "id": "bottom_padding",
    "min": 0,
    "max": 160,
    "step": 10,
    "unit": "px",
    "default": 80,
    "label": "t:sections.all.padding.padding_bottom"
    },
    {
      "type": "header",
      "content": "t:sections.all.border"
    },
    {
    "type": "checkbox",
    "id": "top_border",
    "default": false,
    "label": "t:sections.all.border_top"
    },
    {
    "type": "checkbox",
    "id": "bottom_border",
    "default": false,
    "label": "t:sections.all.border_bottom"
    },
    {
      "type": "select",
      "id": "border_width",
      "label": "t:sections.all.width",
      "options": [
        {
          "value": "normal",
          "label": "t:sections.all.normal"
        },
        {
          "value": "full",
          "label": "t:sections.all.full_width"
        }
        ],
      "default": "normal"
    },
    {
      "type": "select",
      "id": "border_color",
      "label": "t:sections.all.border_color",
      "options": [
        {
          "value": "dark",
          "label": "t:sections.all.colors.dark.label"
        },
        {
          "value": "light",
          "label": "t:sections.all.colors.light.label"
        }
        ],
      "default": "dark"
    }
    ],
    "blocks": [
      {
        "type": "testimonial",
        "name": "t:sections.testimonials.blocks.testimonial.name",
        "settings": [
          {
          "type": "textarea",
          "id": "quote",
          "default": "A customer review or quote from the press.",
          "label": "t:sections.testimonials.blocks.testimonial.settings.quote.label"
          },
          {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.testimonials.blocks.testimonial.settings.image.label",
          "info": "t:sections.testimonials.blocks.testimonial.settings.image.info"
          },
          {
          "type": "text",
          "id": "caption",
          "label": "t:sections.testimonials.blocks.testimonial.settings.caption.label"
          },
          {
          "type": "range",
          "id": "star_rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5,
          "label": "t:sections.testimonials.blocks.testimonial.settings.rating.label"
          }
        ]
      }
  ],
  "presets": [
    {
      "name": "t:sections.testimonials.presets.name",
      "blocks": [
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        }
      ]
    }
  ]
}
{% endschema %}
